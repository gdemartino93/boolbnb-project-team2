import{_ as m,u as _,s as h,e as u,o as r,c,a as e,d as l,v as a,F as b,i as g,t as f,p as v,l as y}from"./index-90952cfa.js";const x={data(){return{auth:_(),store:h,apt:{},adservices:[],services:[],adds:[]}},methods:{async updateData(){this.store.getCoordinates(this.apt.address),this.apt.latitude=this.store.latitude,this.apt.longitude=this.store.longitude,await this.auth.getToken();try{this.apt.additional_services=[...this.adservices],await u.post("/api/v1/apartment/update/"+this.apt.id,this.apt,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){console.log(o)}this.$router.push("/")},onFileChange(o){const t=o.target.files[0];this.apt.img=t},async getServices(){try{const o=await u.get("api/v1/services/all");this.adds=o.data.response}catch(o){console.log(o)}},async getSingleAp(o){try{const t=await u.get("/api/v1/apartment/"+o);this.apt=t.data.response}catch(t){console.log(t)}},getAdServices(o){if(!this.adservices.includes(o))this.adservices.push(o);else{const t=this.adservices.indexOf(o);this.adservices.splice(t,1)}},checkCheckboxes(o){for(let t=0;t<this.apt.additional_services.length;t++){const p=this.apt.additional_services[t];if(p.id==o.id)return this.adservices.push(p.id),!0}return!1}},mounted(){this.getSingleAp(this.$route.params.id),this.getServices()}},n=o=>(v("data-v-26cec0a5"),o=o(),y(),o),k={key:0,class:"my-container"},A={method:"POST",class:"my-form d-flex flex-wrap justify-content-around bg-white rounded-2 p-5"},S={class:"col-sm-11 col-md-5 col-lg-5"},C=n(()=>e("label",{for:"title"},"Title",-1)),w={class:"col-sm-11 col-md-5 col-lg-5"},V=n(()=>e("label",{for:"description"},"Description",-1)),N={class:"col-sm-11 col-md-5 col-lg-5"},T=n(()=>e("label",{for:"room_number"},"Room Number",-1)),U={class:"col-sm-11 col-md-5 col-lg-5"},I=n(()=>e("label",{for:"bed_number"},"Bed Number",-1)),q={class:"col-sm-11 col-md-5 col-lg-5"},B=n(()=>e("label",{for:"bath_number"},"Bath Number",-1)),D={class:"col-sm-11 col-md-5 col-lg-5"},E=n(()=>e("label",{for:"square_meters"},"Square Meters",-1)),F={class:"col-sm-11 col-md-5 col-lg-5"},O=n(()=>e("label",{for:"address"},"Address",-1)),M={class:"col-sm-11 col-md-5 col-lg-5"},P=n(()=>e("label",{for:"img"},"Image",-1)),R={class:"d-flex flex-wrap ms-services"},G=["id","onChange","checked"],L=["for"],j={key:1,class:"autenticato"},z=n(()=>e("h1",{class:"text-danger"},"Non Autenticato",-1)),H=n(()=>e("h2",null,"Effettua il Login",-1)),J=[z,H];function K(o,t,p,Q,i,d){return i.auth.user?(r(),c("section",k,[e("form",A,[e("div",S,[C,l(e("input",{type:"text",name:"title","onUpdate:modelValue":t[0]||(t[0]=s=>i.apt.title=s)},null,512),[[a,i.apt.title]])]),e("div",w,[V,l(e("input",{type:"text",name:"description","onUpdate:modelValue":t[1]||(t[1]=s=>i.apt.description=s)},null,512),[[a,i.apt.description]])]),e("div",N,[T,l(e("input",{type:"number",name:"room_number","onUpdate:modelValue":t[2]||(t[2]=s=>i.apt.room_number=s)},null,512),[[a,i.apt.room_number]])]),e("div",U,[I,l(e("input",{type:"number",name:"bed_number","onUpdate:modelValue":t[3]||(t[3]=s=>i.apt.bed_number=s)},null,512),[[a,i.apt.bed_number]])]),e("div",q,[B,l(e("input",{type:"number",name:"bath_number","onUpdate:modelValue":t[4]||(t[4]=s=>i.apt.bath_number=s)},null,512),[[a,i.apt.bath_number]])]),e("div",D,[E,l(e("input",{type:"number",name:"square_meters","onUpdate:modelValue":t[5]||(t[5]=s=>i.apt.square_meters=s)},null,512),[[a,i.apt.square_meters]])]),e("div",F,[O,l(e("input",{type:"text",name:"address","onUpdate:modelValue":t[6]||(t[6]=s=>i.apt.address=s)},null,512),[[a,i.apt.address]])]),e("div",M,[P,e("input",{type:"file",name:"img",onChange:t[7]||(t[7]=(...s)=>d.onFileChange&&d.onFileChange(...s))},null,32)]),e("div",R,[(r(!0),c(b,null,g(i.adds.additional_service,s=>(r(),c("div",{key:s.id,class:"ms-col col-sm-12 col-md-3 col-lg-3 p-3"},[e("div",null,[e("input",{type:"checkbox",id:s.id,onChange:W=>d.getAdServices(s.id),checked:d.checkCheckboxes(s)},null,40,G),e("label",{for:s.name},f(s.name),9,L)])]))),128))]),e("button",{type:"button",class:"button btn btn-primary btn-block text-uppercase rounded-pill shadow-sm p-2 mt-3",onClick:t[8]||(t[8]=s=>d.updateData(i.apt))},"AGGIORNA APPARTAMENTO")])])):(r(),c("section",j,J))}const Y=m(x,[["render",K],["__scopeId","data-v-26cec0a5"]]);export{Y as default};
