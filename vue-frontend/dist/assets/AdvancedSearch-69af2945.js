import{_ as f,A as g,s as y,e as q,f as m,o as a,c as u,a as t,d as i,v as l,h as c,b as x,F as _,i as C,j as V,p as L,l as k}from"./index-90952cfa.js";const A="/assets/noun-apartment-194955-2899f180.png";const w={components:{AptCard:g},data(){return{store:y,queryValue:"",queryLatitude:"",queryLongitude:"",apartments:[],radius:20,error:null,room_number:"",bed_number:"",isOpen:!1}},methods:{getCoordinates(o){o.preventDefault();var e=`${this.store.geolocationUrl}`+this.queryValue+`.json?key=${this.store.apiKey}`,r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null);var d=JSON.parse(r.responseText);this.queryLatitude=parseFloat(d.results[0].position.lat),this.queryLongitude=parseFloat(d.results[0].position.lon),console.log(this.queryLatitude,this.queryLongitude),this.getApt()},getApt(){let o=new FormData;o.append("latitude",this.queryLatitude),o.append("longitude",this.queryLongitude),o.append("radius",this.radius),o.append("room_number",this.room_number),o.append("bed_number",this.bed_number),console.log(o),q.post("/api/v1/apartment/search",o).then(e=>{console.log("apSear",e),this.apartments=e.data.apartments,this.$emit("apartments-searched",this.apartments),console.log(this.apartments),this.apartments.length==0?this.error="nessun appartamento trovato":this.error=null})}},mounted(){}},h=o=>(L("data-v-e09d5e1e"),o=o(),k(),o),O={class:"container",id:"form"},S={action:"",method:"post"},N={class:"button"},U={class:"d-flex box-ricerca align-items-center"},B={key:0,class:"menu"},F=h(()=>t("img",{src:A,alt:"room number logo"},null,-1)),D=h(()=>t("label",{for:"range"},"O in alternativa puoi cambiare il range di ricerca (il valore di default Ã¨ di 20Km):",-1)),I={class:"container d-flex flex-wrap"};function j(o,e,r,d,n,T){const p=m("font-awesome-icon"),v=m("AptCard");return a(),u(_,null,[t("div",O,[t("form",S,[t("div",N,[t("div",U,[i(t("input",{type:"search",name:"searchBar",placeholder:"Cosa stai cercando?","onUpdate:modelValue":e[0]||(e[0]=s=>n.queryValue=s),id:"ricerca",onClick:e[1]||(e[1]=s=>n.isOpen=!0)},null,512),[[l,n.queryValue]]),c(p,{icon:"fa-solid fa-filter",onClick:e[2]||(e[2]=s=>n.isOpen=!0),id:"icona-ricerca"})]),n.isOpen?(a(),u("div",B,[t("div",null,[F,i(t("input",{type:"number",name:"room_number","onUpdate:modelValue":e[3]||(e[3]=s=>n.room_number=s),placeholder:"Numero minimo di camere ..."},null,512),[[l,n.room_number]])]),t("div",null,[c(p,{icon:"fa-solid fa-bed",id:"bed"}),i(t("input",{type:"number",name:"bed_number","onUpdate:modelValue":e[4]||(e[4]=s=>n.bed_number=s),placeholder:"Numero minimo di letti ..."},null,512),[[l,n.bed_number]])]),t("div",null,[D,i(t("input",{type:"range",name:"range",min:"20",max:"100",step:"20","onUpdate:modelValue":e[5]||(e[5]=s=>n.radius=s)},null,512),[[l,n.radius]])]),t("div",{class:"buttonClose",onClick:e[6]||(e[6]=s=>n.isOpen=!1)}," Close ")])):x("",!0)])])]),t("div",I,[(a(!0),u(_,null,C(n.apartments,(s,b)=>(a(),V(v,{class:"my-4 col-12 col-sm-6 col-md-4 col-lg-3",apartment:s,key:b},null,8,["apartment"]))),128))])],64)}const H=f(w,[["render",j],["__scopeId","data-v-e09d5e1e"]]);export{H as default};
