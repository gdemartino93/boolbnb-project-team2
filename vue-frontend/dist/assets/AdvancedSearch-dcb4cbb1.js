import{_ as g,A as y,s as C,e as x,f as c,o as r,c as i,a as t,d as l,v as d,h as _,b as h,F as q,i as V,j as k,p as L,l as A}from"./index-4d8c8126.js";const F="/assets/noun-apartment-194955-2899f180.png",w="/assets/dreams-here-366ce142.png";const S={components:{AptCard:y},data(){return{store:C,queryValue:"",queryLatitude:"",queryLongitude:"",apartments:[],radius:20,error:null,room_number:"",bed_number:"",isOpen:!1,isFilled:!1}},methods:{getCoordinates(s){s.preventDefault(),this.isFilled=!0;var e=`${this.store.geolocationUrl}`+this.queryValue+`.json?key=${this.store.apiKey}`,a=new XMLHttpRequest;a.open("GET",e,!1),a.send(null);var u=JSON.parse(a.responseText);this.queryLatitude=parseFloat(u.results[0].position.lat),this.queryLongitude=parseFloat(u.results[0].position.lon),console.log(this.queryLatitude,this.queryLongitude),this.getApt()},getApt(){let s=new FormData;s.append("latitude",this.queryLatitude),s.append("longitude",this.queryLongitude),s.append("radius",this.radius),s.append("room_number",this.room_number),s.append("bed_number",this.bed_number),console.log(s),x.post("/api/v1/apartment/search",s).then(e=>{console.log("apSear",e),this.apartments=e.data.apartments,this.$emit("apartments-searched",this.apartments),console.log(this.apartments),this.apartments.length==0?this.error="nessun appartamento trovato":this.error=null})}},mounted(){}},b=s=>(L("data-v-9eb59f93"),s=s(),A(),s),N={class:"search"},O={class:"container",id:"form"},U={action:"",method:"post"},B={class:"button"},D={class:"wrap-ricerca d-flex"},I={class:"d-flex box-ricerca align-items-center"},j={key:0,class:"menu"},T=b(()=>t("img",{src:F,alt:"room number logo"},null,-1)),E=b(()=>t("label",{for:"range"},"O in alternativa puoi cambiare il range di ricerca (il valore di default Ã¨ di 20Km):",-1)),H={key:0,id:"phrase",src:w,alt:""},K={class:"slider container d-flex gap-2"};function M(s,e,a,u,o,p){const m=c("font-awesome-icon"),v=c("AptCard");return r(),i("div",N,[t("div",O,[t("form",U,[t("div",B,[t("div",D,[t("div",I,[l(t("input",{type:"search",name:"searchBar",placeholder:"Cosa stai cercando?","onUpdate:modelValue":e[0]||(e[0]=n=>o.queryValue=n),id:"ricerca"},null,512),[[d,o.queryValue]]),_(m,{icon:"fa-solid fa-filter",onClick:e[1]||(e[1]=n=>o.isOpen=!0),id:"icona-ricerca"})]),t("div",null,[t("input",{class:"btn mx-2",type:"submit",value:"Cerca",onClick:e[2]||(e[2]=(...n)=>p.getCoordinates&&p.getCoordinates(...n)),id:"cerca"})])]),o.isOpen?(r(),i("div",j,[t("div",null,[T,l(t("input",{type:"number",name:"room_number","onUpdate:modelValue":e[3]||(e[3]=n=>o.room_number=n),placeholder:"Numero minimo di camere ..."},null,512),[[d,o.room_number]])]),t("div",null,[_(m,{icon:"fa-solid fa-bed",id:"bed"}),l(t("input",{type:"number",name:"bed_number","onUpdate:modelValue":e[4]||(e[4]=n=>o.bed_number=n),placeholder:"Numero minimo di letti ..."},null,512),[[d,o.bed_number]])]),t("div",null,[E,l(t("input",{type:"range",name:"range",min:"20",max:"100",step:"20","onUpdate:modelValue":e[5]||(e[5]=n=>o.radius=n)},null,512),[[d,o.radius]])]),t("div",{class:"buttonClose",onClick:e[6]||(e[6]=n=>o.isOpen=!1)}," Close ")])):h("",!0)])])]),o.isFilled?(r(),i("img",H)):h("",!0),t("div",K,[(r(!0),i(q,null,V(o.apartments,(n,f)=>(r(),k(v,{class:"searchCard my-4 col-12 col-sm-6 col-md-4 col-lg-3",apartment:n,key:f},null,8,["apartment"]))),128))])])}const J=g(S,[["render",M],["__scopeId","data-v-9eb59f93"]]);export{J as default};
